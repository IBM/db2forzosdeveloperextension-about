<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.23.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Committing and rolling back changes - IBM Db2 for z/OS Developer Extension</title>
<meta name="description" content="Db2 Developer Extension provides a lot of flexibility with committing and rolling back the results of running SQL statements. This granular level of control is especially useful when you’re prototyping and testing because it allows you to identify which statements run successfully and which cause errors without potentially corrupting your test system.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Db2 for z/OS Developer Extension">
<meta property="og:title" content="Committing and rolling back changes">
<meta property="og:url" content="http://localhost:4000/2021/03/16/Committing-and-rolling-back-changes.html">


  <meta property="og:description" content="Db2 Developer Extension provides a lot of flexibility with committing and rolling back the results of running SQL statements. This granular level of control is especially useful when you’re prototyping and testing because it allows you to identify which statements run successfully and which cause errors without potentially corrupting your test system.">







  <meta property="article:published_time" content="2021-03-16T00:00:00-07:00">






<link rel="canonical" href="http://localhost:4000/2021/03/16/Committing-and-rolling-back-changes.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Db2 for z/OS Developer Extension Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.png" alt="IBM Db2 for z/OS Developer Extension"></a>
        
        <a class="site-title" href="/">
          IBM Db2 for z/OS Developer Extension
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/blogs/">Blogs</a>
            </li><li class="masthead__menu-item">
              <a href="https://marketplace.visualstudio.com/items?itemName=ibm.db2forzosdeveloperextension">VS Code Marketplace</a>
            </li><li class="masthead__menu-item">
              <a href="https://github.com/IBM/db2forzosdeveloperextension-about/issues">GitHub</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">The basics</span>
        

        
        <ul>
          
            <li><a href="/2021/03/12/Getting-started.html">Getting started</a></li>
          
            <li><a href="/2021/06/15/Creating-a-database-connection.html">Creating a database connection</a></li>
          
            <li><a href="/2021/03/16/Committing-and-rolling-back-changes.html" class="active">Committing and rolling back changes</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Working with SQL</span>
        

        
        <ul>
          
            <li><a href="/2021/06/15/Preparing-to-run-an-SQL-statement.html">Preparing to run an SQL statement</a></li>
          
            <li><a href="/2021/06/16/Formatting-SQL.html">Formatting SQL</a></li>
          
            <li><a href="/2021/06/15/Running-multiple-SQL-statements.html">Running multiple SQL statements</a></li>
          
            <li><a href="/2021/03/12/Running-SQL-from-different-types-of-files.html">Running SQL from different types of files</a></li>
          
            <li><a href="/2021/06/15/Running-SQL-with-multiple-selection-scopes.html">Running SQL with multiple selection scopes</a></li>
          
            <li><a href="/2021/06/15/Running-SQL-from-within-a-stored-procedure.html">Running SQL from within a stored procedure</a></li>
          
            <li><a href="/2021/06/15/Saving-SQL-results-to-a-file.html">Saving SQL results to a file</a></li>
          
            <li><a href="/2021/06/16/Limiting-the-number-of-rows-returned.html">Limiting the number of rows returned</a></li>
          
            <li><a href="/2021/06/15/Comparing-SQL-results.html">Comparing SQL results</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Working with stored procedures</span>
        

        
        <ul>
          
            <li><a href="/2021/03/16/Creating-stored-procedures.html">Creating stored procedures</a></li>
          
            <li><a href="/2021/03/12/Deploying-running-and-debugging-stored-procedures-basics.html">Deploying, running, and debugging stored procedures</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tips and tricks</span>
        

        
        <ul>
          
            <li><a href="/2021/06/15/Running-commands-from-the-command-palette.html">Running commands from the Command Palette</a></li>
          
            <li><a href="/2021/06/15/Creating-your-own-code-snippets.html">Creating your own code snippets</a></li>
          
            <li><a href="/2021/06/16/Setting-multiple-port-numbers.html">Setting multiple port numbers</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            <li><a href="/2021/06/15/Opening-an-issue-and-providing-logs.html">Opening an issue and providing logs</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Committing and rolling back changes">
    <meta itemprop="description" content="Db2 Developer Extension provides a lot of flexibility with committing and rolling back the results of running SQL statements. This granular level of control is especially useful when you’re prototyping and testing because it allows you to identify which statements run successfully and which cause errors without potentially corrupting your test system.">
    <meta itemprop="datePublished" content="2021-03-16T00:00:00-07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Committing and rolling back changes
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#commit-after-each-statement">Commit after each statement</a></li><li><a href="#commit-on-completion">Commit on completion</a></li><li><a href="#roll-back-changes-on-completion">Roll back changes on completion</a></li></ul>

            </nav>
          </aside>
        
        <p>Db2 Developer Extension provides a lot of flexibility with committing and rolling back the results of running SQL statements. This granular level of control is especially useful when you’re prototyping and testing because it allows you to identify which statements run successfully and which cause errors without potentially corrupting your test system.</p>

<p>For example, you can:</p>

<ul>
  <li>Commit the changes for each SQL statement as soon as it completes successfully</li>
  <li>Commit the changes for all SQL statements only if all the statements run successfully</li>
  <li>Roll back all of the changes even if all of the statements run successfully</li>
</ul>

<p>Depending on the commit or rollback option you select, you have the following options for what happens when an error occurs while running your SQL:</p>

<ul>
  <li>Continue to process the remaining SQL statements that you selected to run</li>
  <li>Stop processing as soon as the first error occurs</li>
  <li>Stop processing and immediately roll back all changes</li>
</ul>

<p>You set these options by right-clicking in your file and selecting <strong>Run SQL Options</strong> from the context menu to display the <strong>JDBC runtime options</strong> view. You use the <strong>Action when script runs successfully</strong> box to set commit and rollback options, and you use the <strong>Action when an error occurs</strong> box to control how Db2 Developer Extension responds when a SQL statement fails.</p>

<p>Let’s start with this scenario: Our company has just formed a new Client Support department and has staffed it with some existing employees and some new employees. We need to update two tables with information about the new department and its members. We’ll use a couple of Db2-supplied sample tables, <a href="https://www.ibm.com/support/knowledgecenter/SSEPEK_12.0.0/intro/src/tpc/db2z_sampletablesdepartment.html">DSN8C10.DEPT</a> and <a href="https://www.ibm.com/support/knowledgecenter/SSEPEK_12.0.0/intro/src/tpc/db2z_sampletablesemployeemain.html">DSN8C10.EMP</a>, to demonstrate how the commit, roll back, and error-handling options work.</p>

<p>Here’s the correct SQL for making these changes:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">UPDATE</span> <span class="n">DSN8C10</span><span class="p">.</span><span class="n">DEPT</span> <span class="k">SET</span> <span class="n">DEPTNAME</span> <span class="o">=</span> <span class="s1">'CLIENT SUPPORT'</span> <span class="k">WHERE</span> <span class="n">DEPTNO</span> <span class="o">=</span> <span class="s1">'E01'</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">DSN8C10</span><span class="p">.</span><span class="n">DEPT</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'A01'</span><span class="p">,</span> <span class="s1">'AI AD TEAM'</span><span class="p">,</span> <span class="s1">'000070'</span><span class="p">,</span> <span class="s1">'D01'</span><span class="p">,</span> <span class="s1">'SVL'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">DSN8C10</span><span class="p">.</span><span class="n">DEPT</span> <span class="k">WHERE</span> <span class="n">DEPTNO</span> <span class="o">=</span> <span class="s1">'A01'</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">DSN8C10</span><span class="p">.</span><span class="n">EMP</span> <span class="k">SET</span> <span class="n">SALARY</span> <span class="o">=</span> <span class="n">SALARY</span> <span class="o">*</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1</span> <span class="k">WHERE</span> <span class="n">WORKDEPT</span> <span class="o">=</span> <span class="s1">'A00'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">DSN8C10</span><span class="p">.</span><span class="n">EMP</span> <span class="k">WHERE</span> <span class="n">WORKDEPT</span> <span class="o">=</span> <span class="s1">'A00'</span><span class="p">;</span>
</code></pre></div></div>

<p>To help demonstrate the available actions when an error occurs, we’re going to introduce a few errors into this SQL in the following sections.</p>

<h2 id="commit-after-each-statement">Commit after each statement</h2>

<p>Select <strong>Commit after each statement</strong> to commit each individual SQL statement after it runs successfully.  </p>

<p><img src="/assets/images/commit-rollback-commit-after-each-stmt.png" alt="Commit after each statement dialog" /></p>

<p>Here’s the SQL to update the DSN8C10.DEPT and DSN8C10.EMP tables. In this example, the INSERT statement and the second UPDATE and SELECT statements contain errors.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UPDATE DSN8C10.DEPT SET DEPTNAME = 'CLIENT SUPPORT' WHERE DEPTNO = 'E01';
INSERT INTO DSN8C10.DEPT VALUES (‘A01’, ‘AI AD TEAM’, ‘M001’, ‘D01’);
SELECT * FROM DSN8C10.DEPT WHERE DEPTNO = 'A01';
UPDATE DSN8C10.EMP SET SALARY = SALARY * 1.1 WHERE DEPT = 'A00';
SELECT * FROM DSN8C10.EMP WHERE DEPTNO = 'A00';
</code></pre></div></div>
<p>And here are the results from running that SQL, which resulted in three errors:</p>

<ul>
  <li>If you select <strong>Processing continues</strong>, all of the SQL statements will continue to run after the first error (INSERT INTO DSN8C10.DEPT…) occurred, and the successful UPDATE statement will be committed. The results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-commit-after-each-stmt-processing-continues.png" alt="Commit after each statement Processing continues results" /></p>

<ul>
  <li>If you select <strong>Processing stops</strong>, all of the SQL statements after the first error will not be not be run, but the successful UPDATE statement will still be committed. The results would look like this instead:</li>
</ul>

<p><img src="/assets/images/commit-rollback-commit-after-each-stmt-processing-stops.png" alt="Commit after each statement Processing stops results" /></p>

<ul>
  <li>If you correct the three statements that are causing errors so that all of these statements run error free, each statement will be committed as soon as it ran successfully, regardless of the error action that you selected, and the results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-successful-results.png" alt="Commit on completion successful results" /></p>

<h2 id="commit-on-completion">Commit on completion</h2>

<p>Select <strong>Commit on completion</strong> to wait until all of the SQL statements that you have selected to run have completed before committing any of them.</p>

<p><img src="/assets/images/commit-rollback-commit-on-completion.png" alt="Commit on completion dialog" /></p>

<p>Here’s the SQL to update the DSN8C10.DEPT and DSN8C10.EMP tables, which contains one error in the INSERT statement:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UPDATE DSN8C10.DEPT SET DEPTNAME = 'CLIENT SUPPORT' WHERE DEPTNO = 'E01';
INSERT INTO DSN8C10.DEPT VALUES  ('A01', 'AI AD TEAM', 'M001, 'D01');
SELECT * FROM DSN8C10.DEPT WHERE DEPTNO = 'A01';
UPDATE DSN8C10.EMP SET SALARY = SALARY * 1.1 WHERE WORKDEPT = 'A00';
SELECT * FROM DSN8C10.EMP WHERE WORKDEPT = 'A00';
</code></pre></div></div>
<p>And here are the results from running that SQL, which resulted in a single error:</p>

<ul>
  <li>If you select <strong>Processing continues</strong>, all the SQL statements that you selected will continue to run after an error occurs, and both UPDATE statements will be committed when processing ends. The results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-commit-on-completion-processing-continues.png" alt="Commit on completion Processing continues results" /></p>

<ul>
  <li>If you select <strong>Processing stops</strong>, all of the SQL statements after the first error will not be run. Only the first UPDATE statement will be committed when processing ends. The results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-commit-on-completion-processing-stops.png" alt="Commit on completion Processing stops results" /></p>

<ul>
  <li>If you select <strong>Processing stops and changes are rolled back</strong>, all of the SQL statements after the first error will not be run. Changes from the first UPDATE statement will not be committed. The results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-commit-on-completion-rollback-changes.png" alt="Commit on completion Roll back changes results" /></p>

<ul>
  <li>If you correct the INSERT statement so all of the SQL statements run error free, each statement would be committed after the last statement ran successfully regardless of the error action that you selected, and the results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-successful-results.png" alt="Commit on completion successful results" /></p>

<h2 id="roll-back-changes-on-completion">Roll back changes on completion</h2>

<p>Select <strong>Roll back changes on completion</strong> if you don’t want to commit any changes that result from running your SQL, even if everything runs error free.</p>

<p><img src="/assets/images/commit-rollback-rollback-on-completion.png" alt="Roll back changes on completion" /></p>

<p>Here’s the SQL to update the DSN8C10.DEPT and DSN8C10.EMP tables, which contains one error in the INSERT statement:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UPDATE DSN8C10.DEPT SET DEPTNAME = 'CLIENT SUPPORT' WHERE DEPTNO = 'E01';
INSERT INTO DSN8C10.DEPT VALUES  ('A01', 'AI AD TEAM', 'M001', 'D01');
SELECT * FROM DSN8C10.DEPT WHERE DEPTNO = 'A01';
UPDATE DSN8C10.EMP SET SALARY = SALARY * 1.1 WHERE WORKDEPT = 'A00';
SELECT * FROM DSN8C10.EMP WHERE WORKDEPT = 'A00'
</code></pre></div></div>
<p>And here are the results from running that SQL, which resulted in a single error:</p>

<ul>
  <li>If you select <strong>Processing continues</strong>, all the SQL statements that you selected will continue to run after an error occurs. No changes will be committed. The results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-rollback-on-completion-processing-continues.png" alt="Roll back changes on completion Processing continues results" /></p>

<ul>
  <li>If you select <strong>Processing stops and changes are rolled back</strong>, all of the SQL statements after the first error will not be run. Changes from the first UPDATE statement are not committed. The results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-rollback-on-completion-processing-stops-rollback-changes.png" alt="Roll back changes on completion Processing stops results and changes are rolled back results" /></p>

<ul>
  <li>If you correct the INSERT statement so all of the SQL statements run error free, no changes will be committed regardless of the error action that was selected, and the results would look like this:</li>
</ul>

<p><img src="/assets/images/commit-rollback-successful-results.png" alt="Commit on completion successful results" />
<!--- Add summary and links to other related articles ---></p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-03-16T00:00:00-07:00">March 16, 2021</time></p>


      </footer>

      

      <!--

  <nav class="pagination">
    
      <a href="/2021/03/13/Tips-and-tricks.html" class="pagination--pager" title="Tips and tricks
">Previous</a>
    
    
      <a href="/2021/03/16/Creating-stored-procedures.html" class="pagination--pager" title="Creating stored procedures
">Next</a>
    
  </nav>

-->
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 IBM Db2 for z/OS Developer Extension. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
